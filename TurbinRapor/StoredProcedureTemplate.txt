USE [WINDTURBINE]
GO
/****** Object:  StoredProcedure [DataSync].[AspNetUsers_dss_bulkupdate_14850337-2ada-4392-afa1-e95772cd7405]    Script Date: 5/31/2017 3:19:07 PM ******/
--select * 
--  from WINDTURBINE.information_schema.routines 
-- where routine_type = 'PROCEDURE' and SPECIFIC_SCHEMA = 'DataSync'

--RETURN

DECLARE @SPNAME as nvarchar(128);
DECLARE @SQLString as nvarchar(500);

--DECLARE THE CURSOR FOR A QUERY.
DECLARE SPCURSOR CURSOR READ_ONLY
FOR
SELECT SPECIFIC_NAME
FROM INFORMATION_SCHEMA.ROUTINES
WHERE ROUTINE_TYPE = 'PROCEDURE' AND SPECIFIC_SCHEMA = 'DataSync'
 
--OPEN CURSOR.
OPEN SPCURSOR
 
--FETCH THE RECORD INTO THE VARIABLES.
FETCH NEXT FROM SPCURSOR INTO @SPNAME


WHILE @@FETCH_STATUS = 0  
BEGIN
	SET @SQLString = N'DROP PROCEDURE [DataSync].[' + @SPNAME + N'];';

	PRINT @SQLString;

	EXECUTE sp_executesql @SQLString

	FETCH NEXT FROM SPCURSOR INTO @SPNAME 
END 

CLOSE SPCURSOR
DEALLOCATE SPCURSOR